/*! rozier-backend-template 2014-07-16 19:36:32 */
!function(){for(var a,b=function(){},c=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"],d=c.length,e=window.console=window.console||{};d--;)a=c[d],e[a]||(e[a]=b)}();var Rozier={};Rozier.onDocumentReady=function(){for(var a in temp)Rozier[a]=temp[a];$(".root-tree").on("nestable-change",Rozier.onNestableNodeTreeChange)},Rozier.onNestableNodeTreeChange=function(a,b){console.log("Node: "+b.data("node-id"));var c=parseInt(b.data("node-id")),d=parseInt(b.parents("li").first().data("node-id")),e={_token:Rozier.ajaxToken,_action:"updatePosition",nodeId:c};b.next().length?e.nextNodeId=parseInt(b.next().data("node-id")):b.prev().length&&(e.prevNodeId=parseInt(b.prev().data("node-id"))),isNaN(d)&&(d=null),e.newParent=d,console.log(e),$.ajax({url:Rozier.routes.nodeAjaxEdit.replace("%node_id%",c),type:"POST",dataType:"json",data:e}).done(function(a){console.log(a),$.UIkit.notify({message:a.responseText,status:a.status,timeout:3e3,pos:"top-center"})}).fail(function(a){console.log(a)}).always(function(){console.log("complete")})},$(document).ready(Rozier.onDocumentReady);