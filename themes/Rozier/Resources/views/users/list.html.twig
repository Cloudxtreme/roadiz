{% extends 'base.html.twig' %}

{% block content %}
<section id="manage-users">
	<header>
		<h1 id="title">{% trans %}Users{% endtrans %}</h1>
	</header>
	<nav><a class="uk-button" href="{{ path('usersAddPage') }}"><i class="uk-icon-plus"></i> {% trans %}Create a user{% endtrans %}</a></nav>

	{% include 'widgets/filtersBar.html.twig' %}
	<div class="container">
		<table class="users uk-table">
			<thead>
		        <tr>
		            <th></th>
		            <th>{% trans %}user.username{% endtrans %}
		            	{% if request.query.get("field") == 'username' and request.query.get("ordering") == "DESC" %}
		            		<a href="?field=username&amp;ordering=ASC"><i class="uk-icon-sort-down"></i></a>
		            	{% else %}
		            		<a href="?field=username&amp;ordering=DESC"><i class="uk-icon-sort-up"></i></a>
		            	{% endif %}
		            </th>
		            <th>{% trans %}user.email{% endtrans %}
		            	{% if request.query.get("field") == 'email' and request.query.get("ordering") == "DESC" %}
		            		<a href="?field=email&amp;ordering=ASC"><i class="uk-icon-sort-down"></i></a>
		            	{% else %}
		            		<a href="?field=email&amp;ordering=DESC"><i class="uk-icon-sort-up"></i></a>
		            	{% endif %}
		            </th>
		            <th>{% trans %}user.roles{% endtrans %}</th>
		            <th>{% trans %}actions{% endtrans %}</th>
		        </tr>
		    </thead>
			<tbody>
				{% for user in users %}
				<tr>
					<td><img width="50" height="50" class="uk-thumbnail" src="{{ user.getPictureUrl }}" alt="{{ user.getUsername }}" /></td>
					<td><a href="{{ path('usersEditPage', { userId: user.getId }) }}">{{ user.getUsername }}</a></td>
					<td>{{ user.getEmail }}</td>
					<td>
						<i class="uk-icon-star"></i> {% transchoice user.getRoles|length %}{0} No roles|{1} 1 role|]1,Inf] %count% roles{% endtranschoice %}
					</td>
					<td>
						<a class="uk-button uk-button-small uk-button-danger" href="{{ path('usersDeletePage', { userId: user.getId }) }}">{% trans %}Delete{% endtrans %}</a>
					</td>
				</tr>
				{% endfor %}
			</tbody>
		</table>
	</div>
</section>
{% endblock %}
