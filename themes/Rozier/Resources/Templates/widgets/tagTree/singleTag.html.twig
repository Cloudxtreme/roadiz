{% set name = tag.getDefaultTranslatedTag.getName %}
<li data-tag-id="{{ tag.getId }}" 
	class="tagtree-element">

	<div class="tagtree-element-inner uk-nestable-item">
		<div class="uk-nestable-handle"></div>
		<div data-nestable-action="toggle"></div>
		<div class="tagtree-element-name">
			<i class="uk-icon-tag"></i> 
			{% if not tag.isVisible %}<i class="uk-icon-eye-slash"></i> {% endif %}

			{% if tag.isHidingChildren %}
				<a href="{{ path('tagsTreePage', { tag_id:tag.getId }) }}">{{ name }}</a>
			{% else %}
				<a href="{{ path('tagsEditPage', { tag_id:tag.getId }) }}">{{ name }}</a>
			{% endif %}
		</div>

		<div class="tagtree-contextualmenu uk-button-dropdown" data-uk-dropdown="{mode:'click'}">
		    <button class="uk-button uk-button-mini"><i class="uk-icon-caret-down"></i></button>
		    <nav class="uk-dropdown uk-dropdown-small">
		        <div class="uk-nav uk-nav-dropdown">
		            <p>
		            	<a title="{% trans %}edit.tag.%name%{% endtrans %}" href="{{ path('tagsEditPage', { tag_id:tag.getId }) }}">
		            		<i class="uk-icon-pencil"></i> {% trans %}edit.tag{% endtrans %}
		            	</a>
		            </p>
		            <p>
		            	<a title="{% trans %}add.child.tag.%name%{% endtrans %}" href="{{ path('tagsAddChildPage', { tag_id:tag.getId }) }}">
		            		<i class="uk-icon-plus"></i> {% trans %}add.child.tag{% endtrans %}
		            	</a>
		            </p>
		            <p>
		            	<a title="{% trans %}delete.tag.%name%{% endtrans %}" href="{{ path('tagsDeletePage', { tag_id:tag.getId }) }}">
		            		<i class="uk-icon-trash-o"></i> {% trans %}delete.tag{% endtrans %}
		            	</a>
		            </p>
		        </div>
		    </nav>
		</div>
	</div>
	<ul class="uk-nestable-list" data-parent-tag-id="{{ tag.getId }}">
	{# 
	 # For drag&drop ease, we don't create nested lists
	 # We will have to check after OR inside drag status
	 #}
	{% for subNode in tagTree.getChildrenTags(tag) %}
		{% include 'widgets/tagTree/singleTag.html.twig' with {"tag":subNode, "parent":tag, "tagTree":tagTree} %}
	{% endfor %}
	</ul>
</li>